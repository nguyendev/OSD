@*@model IEnumerable<QuanLyNhaHangv1.Models.GrantPermission>*@

@{
    ViewData["Title"] = "View";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<h2 style="padding-top:15px;">
    <a href="~/admin/blogadministrator/index">Danh m?c ng??i dung</a>
    &gt;&gt; C?p quy?n cho ng??i dùng <b style="color:blue"> @ViewBag.usergrant</b>
    C?p quy?n ng??i dùng
</h2>
<hr />
<p>
    <a asp-action="Create">Create New</a>
</p>
<div class="col-xs-4 col-md-4">
    <h4>Danh sách nghi?p v?</h4>
    @Html.DropDownList("businessController", (IEnumerable<SelectListItem>)ViewBag.items, new { size = 20, onchage = "getPermissions('/BlogGrantPermission/getPermission/'+this.value,'" })
</div>
<div class="col-xs-4 col-md-4">
    <h4>Danh sách quy?n h?n</h4>
    <div id="listaction"></div>
</div>

<script>
    @*function getPermissions(action, usergrant)
    {
        $.ajax({
            method: "Get",
            url: action,
            data: {usertemp:usergrant},
            success: function (data) {
                $('#listaction').html('');
                $.each(data,
                    function (index, value){
                        if(value.IsGranted)
                            $('#listaction').append("<input type = 'CheckBox' checked onchange='updatePermission(" + "\"/BlogGrantPermission/updatePermission/\"+this.value,\"@*@Session["usergrant"]*@)
                        else
                            $('#listaction').append("<input type = 'CheckBox' onchange='updatePermission("+ "\"))

                }
            }
        }
        
        
        
        )
    }*@
    function updatePermission (action, usergrant)
    {
        $.ajax({
            method: "GET",
            url:action,
            data: {usertemp: usergrant},
            success: function (data) {
                $("#msg").html(data);
            }
        })
    }
</script>